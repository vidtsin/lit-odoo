<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>


        <record id="view_veral_partner_maquinas_search" model="ir.ui.view">
            <field name="name">veral.partner.maquinas.search</field>
            <field name="model">veral.partner.maquinas</field>
            <field name="arch" type="xml">
                <search string="Máquinas en Clientes">
                    <field name="name" string="Cliente"/>
                    <field name="maquina" string="Máquina"/>
                    <field name="tipo" string="Tipo"/>
                    <field name="clase" string="Clase"/>

                    <filter string="Activos" name="maquina_usada" 
                    domain="[('fecha_alta','!=',False)]"/>
                    <filter string="Potenciales" name="maquina_usada" 
                    domain="[('fecha_alta','=',False)]"/>
                    <filter string="Marketing" name="no_marketing" 
                    domain="[('no_marketing','=',0)]"/>
                    <filter string="Usadas" name="maquina_usada" 
                    domain="[('estado','ilike','usada')]"/>
                    <filter string="Nuevas" name="maquina_usada" 
                    domain="[('estado','ilike','nueva')]"/>

                    <group expand='1' string='Group by...'>
                       <filter string='Cliente' name='cliente' icon="terp-stock_symbol-selection" 
                            domain="[]" context="{'group_by' : 'name'}" />
                       <filter string='Tipo' name='tipo' icon="terp-stock_symbol-selection" domain="[]" 
                            context="{'group_by' : 'tipo'}" />
                       <filter string='Clase' name='clase' icon="terp-stock_symbol-selection" domain="[]" 
                            context="{'group_by' : 'clase'}" />
                        <filter string='Estado' name='estado' icon="terp-stock_symbol-selection" domain="[]" 
                            context="{'group_by' : 'estado'}">                         
                        </filter>
                    </group>
                </search>
            </field>
        </record>


        <record id="view_partner_maquinas_form_view" model="ir.ui.view">
            <field name="name">partner.maquinas.form.view</field>
            <field name="model">veral.partner.maquinas</field>
            <field name="arch" type="xml">
                <form string="Máquinas en Clientes">
                    <group>
                        <field name="name"/>
                        <field name="phone"/>
                        <field name="email"/>
                        <field name="fecha_alta"/>
                    </group>
                    <group>
                        <field name="maquina"/>
                        <field name="date"/>
                        <field name="tipo"/>
                        <field name="clase"/>
                        <field name="estado"/>
                    </group>
                    <group>
                        <field name="notas"/>
                    </group>
                </form>
            </field>
        </record>


        <record model="ir.ui.view" id="veral_partner_maquinas_tree_view">
            <field name="name">veral.partner.maquinas.tree</field>
            <field name="model">veral.partner.maquinas</field>
            <field name="arch" type="xml">
                <tree string="Máquinas en Clientes">
                    <field name="name"/>
                    <field name="phone"/>
                    <field name="email"/>
                    <field name="fecha_alta"/>
                    <field name="maquina"/>
                    <field name="date"/>
                    <field name="tipo"/>
                    <field name="clase"/>
                    <field name="estado"/>
                    <field name="notas"/>
                </tree>
            </field>
        </record>



        <record model="ir.actions.act_window" id="veral_partner_maquinas_act_1">
            <field name="name">Máquinas en Clientes</field>
            <field name="res_model">veral.partner.maquinas</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="veral_partner_maquinas_tree_view"/>
            <field name="search_view_id" ref="view_veral_partner_maquinas_search"/>
            <field name="help" type="html">
                <p>
                    Visualiza las máquinas registradas en el parque de
                    las fichas de clientes.
                </p>
            </field>
        </record>


        <menuitem name="Máquinas en Clientes" id="menu_veral_partner_maquinas" parent="base.menu_sales" sequence="6"
            action="veral_partner_maquinas_act_1"
            groups="base.group_sale_salesman,base.group_sale_manager"/>


    </data>
</openerp>
