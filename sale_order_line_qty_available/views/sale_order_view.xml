<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <record id="view_order_form_inherit_qty_available" model="ir.ui.view">
            <field name="name">sale.order.form.sale.stock.qty.available</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
               <xpath expr="//page[@string='Order Lines']/field[@name='order_line']/form[@string='Sales Order Lines']/group/group/field[@name='address_allotment_id']" position="before">
                   <field name="immediately_usable_qty" readonly="True"/>
                   <field name="min_stock_qty" readonly="True"/>
               </xpath>
            </field>
        </record>

         <record model="ir.ui.view" id="view_stock_available_promise_kanban">
            <field name="name">Quantity available to promise (kanban)</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="stock_available.view_stock_available_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='immediately_usable_qty']/.." position="replace">
                    <li t-if="record.type.raw_value != 'service'">Virtual available: <field name="virtual_available"/> <field name="uom_id"/></li>
                    <li t-if="record.type.raw_value != 'service'">Available to promise: <field name="immediately_usable_qty"/> <field name="uom_id"/></li>
                </xpath>
            </field>
        </record>

    </data>
</openerp>
